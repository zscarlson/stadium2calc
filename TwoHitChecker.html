<script type="text/javascript">

function ThreeHitChecker(maxroll,HP,resultslot,item){
	count = 0;
	maxHP = HP;
	var i;
	var j;
	var k;
	var l;
	BerryUsed1 = 0;
	BerryUsed2 = 0;
	for (i = 217; i < 256; i++)
	{
		remainingHP = HP;
		remainingHP = remainingHP - Math.floor(maxroll*i/255);

		//recovery items
		if (item == "Leftovers"){
			remainingHP = remainingHP + Math.floor(HP/16);
		}
		if ((item == "Gold Berry") & (remainingHP <= Math.floor(maxHP/2))){
			remainingHP = remainingHP + 30;
			BerryUsed1 = 1;
		}
		if ((item == "Berry") & (remainingHP <= Math.floor(maxHP/2))){
			remainingHP = remainingHP + 10;
			BerryUsed1 = 1;
		}

		savedRemainingHP1 = remainingHP;

		for (j = 217; j < 256; j++){
			remainingHP = savedRemainingHP1 - Math.floor(maxroll*j/255);

		//recovery items
		if (item == "Leftovers"){
			remainingHP = remainingHP + Math.floor(HP/16);
		}
		if ((item == "Gold Berry") & (BerryUsed1 == 0) & (remainingHP <= Math.floor(maxHP/2))){
			remainingHP = remainingHP + 30;
			BerryUsed2 = 1;
		}
		if ((item == "Berry") & (BerryUsed1 == 0) & (remainingHP <= Math.floor(maxHP/2))){
			remainingHP = remainingHP + 10;
			BerryUsed2 = 1;
		}

		savedRemainingHP2 = remainingHP;

		for (k = 217; k < 256; k++){
			remainingHP = savedRemainingHP2 - Math.floor(maxroll*k/255);


		//recovery items
		if (item == "Leftovers"){
			remainingHP = remainingHP + Math.floor(HP/16);
		}
		if ((item == "Gold Berry") & (BerryUsed1 == 0) & (BerryUsed2 == 0) & (remainingHP <= Math.floor(maxHP/2))){
			remainingHP = remainingHP + 30;
		}
		if ((item == "Berry") & (BerryUsed1 == 0) & (BerryUsed2 == 0) & (remainingHP <= Math.floor(maxHP/2))){
			remainingHP = remainingHP + 10;
		}

		savedRemainingHP3 = remainingHP;

		for (l = 217; l < 256; l++){

			remainingHP = savedRemainingHP3 - Math.floor(maxroll*l/255);

				//check for KO
					if (remainingHP < 1){
						count = count + 1;
					}
				}
			}
			BerryUsed2 = 0;
		}
		BerryUsed1 = 0;
	}
	var ThreeHitChance = Math.round(count * 10000/59319) / 100;
	document.getElementById('KO' + resultslot).innerHTML = ThreeHitChance + "% 3HKO";
	if (count == 0){
		FourHitChecker(maxroll,HP,resultslot,item);
		}
	}

</script>